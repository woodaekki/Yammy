# Yammy 빌드 및 배포 가이드

## 1. 시스템 환경 및 기술 스택
### 🎨 Frontend
| 기술 스택 | 버전 | 설명 |
|----------|------|------|
| **React.js** | v19.1.1 | 프론트엔드 프레임워크 |
| **Vite** | v7.1.7 | 빌드 도구 및 개발 서버 |
| **Node.js** | v20-slim | JavaScript 런타임 환경 |
| **Tailwind CSS** | v4.1.15 | CSS 프레임워크 |
| **React Router DOM** | v7.9.4 | 라우팅 라이브러리 |
| **Zustand** | v5.0.8 | 상태 관리 라이브러리 |
| **Axios** | v1.13.0 | HTTP 클라이언트 |

### 🔧 Backend
| 기술 스택 | 버전 | 설명 |
|----------|------|------|
| **Java** | v17 (Eclipse Temurin) | 백엔드 개발 언어 |
| **Spring Boot** | v3.5.6 | Java 웹 애플리케이션 프레임워크 |
| **MySQL** | v8.0.33 | 관계형 데이터베이스 |
| **Redis** | - | 캐시/세션 저장소 |
| **Kafka** | - | 메시지 큐 |

| 분류 | 기술 | 버전 |
|-----|------|------|
| Spring Starters | Web / Data JPA / Security / Validation / Mail / Data Redis | BOM(v3.5.6) |
| Auth/Token | JJWT (io.jsonwebtoken) | v0.11.5 |
| API 문서 | springdoc-openapi (Swagger UI) | v2.7.0 |
| Query | QueryDSL JPA (jakarta) | v5.0.0 |
| JSON | Jackson Databind / json-simple | BOM / v1.1.1 |
| 블록체인 | Web3j | v4.10.3 |

### 🤖 AI Service
| 기술 스택 | 버전 | 설명 |
|----------|------|------|
| **Python** | - | AI 서비스 개발 언어 |
| **FastAPI** | v0.119.1+ | 웹 프레임워크 |
| **Uvicorn** | v0.38.0+ | ASGI 서버 |
| **pandas** | v2.3.3+ | 데이터 분석 라이브러리 |
| **kbodata** | v0.2.3+ | KBO 데이터 수집 |
| **Selenium** | v4.0.0+ | 웹 스크래핑 |

### ⚙️ Infrastructure
| 기술 스택 | 버전 | 설명 |
|----------|------|------|
| **Docker** | - | 컨테이너 플랫폼 |
| **Node.js (serve)** | - | 프론트엔드 정적 서빙 |

### 🌐 External Services
| 서비스 | 설명 |
|--------|------|
| **Firebase** | 파일 스토리지 및 실시간 데이터베이스 |
| **AWS S3** | 파일 저장소 |
| **Pinata (IPFS)** | 블록체인 기반 파일 업로드/저장소 |
| **Toss Payments** | 결제 위젯/승인 API |
| **Sepolia (Ethereum Testnet)** | 블록체인 이더리움 테스트넷 |
| **Kakao OAuth** | 카카오 로그인 API |
| **OpenAI GPT API** | GPT-4o 기반 AI 챗봇 |




## 2. 환경변수

### 2.1. 민감값 (백엔드에서 처리)
- 운영/배포 환경: **Gitlab CI/CD variables**로 관리
    - Test Job에서 사용하는 임시 Mysql 값들과 BE_Image Job에서 사용하는 실제 운영 Mysql 값이 다름
    - DB_~ 와 PROD_DB_~ 로 구분하여 정리하였음
- 로컬 개발 환경: **`.env` 파일**로 관리
- 모든 키는 `application.yml`에서 `${…}` 형태로 **환경변수 참조**

| 키 | 설명 |
|---|---|
| `DB_URL` | Test DB |
| `DB_USERNAME` | Test DB |
| `DB_PASSWORD` | Test DB |
| `PROD_DB_URL` | 운영 DB |
| `PROD_DB_USERNAME` | 운영 DB |
| `PROD_DB_PASSWORD` | 운영 DB |
| `AWS_ACCESS_KEY` | AWS |
| `AWS_SECRET_KEY` | AWS |
| `AWS_S3_BUCKET` | AWS |
| `AWS_REGION` | AWS |
| `SPRING_DATA_REDIS_HOST` | Redis |
| `SPRING_DATA_REDIS_PORT` | Redis |
| `SPRING_DATA_REDIS_PASSWORD` | Redis |
| `JWT_SECRET_KEY` | JWT |
| `JWT_ACCESS_EXPIRATION` | JWT |
| `JWT_REFRESH_EXPIRATION` | JWT |
| `SPRING_MAIL_USERNAME` | 이메일 인증 |
| `SPRING_MAIL_PASSWORD` | 이메일 인증 |
| `KAKAO_REST_API_KEY` | 카카오 로그인 |
| `KAKAO_CLIENT_SECRET` | 카카오 로그인 |
| `KAKAO_REDIRECT_URI` | 카카오 로그인 |
| `TEST_SECRET_KEY` | 토스 페이먼트 |
| `TOSS_URL` | 토스 페이먼트 |
| `NFT_CONTRACT_ADDRESS` | NFT |
| `NFT_NETWORK` | NFT |
| `NFT_RPC_URL` | NFT |
| `NFT_PRIVATE_KEY` | NFT |
| `NFT_OWNER_ADDRESS` | NFT |
| `PINATA_API_KEY` | NFT - Pinata |
| `PINATA_API_SECRET` | NFT - Pinata |
| `PINATA_JWT` | NFT - Pinata |
| `PINATA_GATEWAY` | NFT - Pinata |
| `KAFKA_BOOTSTRAP_SERVERS` | KAFKA |
| `KAFKA_CONSUMER_GROUP` | KAFKA |
| `KAFKA_PRODUCER_ACKS` | KAFKA |
| `KAFKA_PRODUCER_RETRIES` | KAFKA |
| `KAFKA_AUTO_OFFSET_RESET` | KAFKA |
| `GMS_KEY` | GMS OpenAI Key|
- 운영/배포 환경에서 환경 변수를 Gitlab CI/CD variables로 관리하므로 프로젝트 빌드는 Gitlab CI/CD Job으로 진행해야 키 값이 정상적으로 주입됨. 
- Test Job의 application.yml과 BE_Image Job의 application.yml을 각각 CI_APPLICATION_YML, PROD_APPLICATION_YML 변수로 저장하여 빌드 타임에 주입됨
- 로컬에서는 Gitlab CI/CD variables로 관리하지 못하므로 `.env` 파일을 사용
    - 값을 제거한 예시용 `.env.backend.example` 첨부

### 2.2. 기타 환경변수 (프론트측 .env)
| 키 | 설명 |
|---|---|
| `VITE_KAKAO_REST_API_KEY` | 카카오 로그인 키 |
| `VITE_TOSS_CLIENT_KEY` | 토스 페이먼트 |
| `VITE_TOSS_CUSTOMER_KEY` | 토스 페이먼트 |
| `VITE_FIREBASE_API_KEY` | FireBase |
| `VITE_FIREBASE_AUTH_DOMAIN` | FireBase |
| `VITE_FIREBASE_PROJECT_ID` | FireBase |
| `VITE_FIREBASE_STORAGE_BUCKET` | FireBase |
| `VITE_FIREBASE_MESSAGING_SENDER_ID` | FireBase |
| `VITE_FIREBASE_APP_ID` | FireBase |
| `VITE_API_BASE_URL` | 백엔드 API 요청 경로 |
| `VITE_NFT_CONTRACT_ADDRESS` | NFT 스마트 컨트랙트 |
| `VITE_NFT_NETWORK` | NFT 이더리움 네트워크 |
| `VITE_NFT_CHAIN_ID` | NFT 이더리움 네트워크 |
| `VITE_ETHERSCAN_URL` | NFT 이더스캔 경로 |
| `VITE_OPENSEA_URL` | NFT 오픈씨 경로 |
- 운영/배포 환경에서 환경 변수는 Gitlab CI/CD PipeLine에서 `.env`로 빌드 타임에 주입됨
- 로컬에서는 직접 `.env`파일을 `/Yammy-FE`에 두고 사용
    - 값을 제거한 예시용 `.env.frontend.example` 첨부

### 2.3. 환경변수 주입 특이사항
Gitlab Ci/CD PipeLine이 1. BE Test, 2. FE 이미지화, 3. BE 이미지화, 4. 이미지 Pull & Deploy 단계를 거치기 때문에 1단계에서 

## 3. DB 접속 정보 및 프로퍼티
### MySQL
| 항목 | 값 |
|---|---|
| JDBC URL | `${PROD_DB_URL}` |
| 사용자 | `${PROD_DB_USERNAME}` |
| 비밀번호 | `${PROD_DB_PASSWORD}` |
| 드라이버 | `com.mysql.cj.jdbc.Driver` |
| 데이터베이스(컨테이너 초기화용) | `${PROD_DB_USERNAME}` |
| 초기 사용자(컨테이너 초기화용) | `${PROD_DB_USERNAME}` |
| 초기 비밀번호(컨테이너 초기화용) | `${PROD_DB_PASSWORD}` |

### Redis
| 항목   | 값                                  |
| ---- | ------------------------------------------- |
| 호스트  | `${SPRING_DATA_REDIS_HOST}`|
| 포트   | `${SPRING_DATA_REDIS_PORT}`|
| 비밀번호 | `${SPRING_DATA_REDIS_PASSWORD}`|   

- DB 접속 값은 환경 변수 값으로 주입됨